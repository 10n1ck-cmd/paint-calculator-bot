<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ—Ä–æ—à–∫–æ–≤—ã—Ö –∫—Ä–∞—Å–æ–∫</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        .header { text-align: center; margin-bottom: 40px; color: white; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .header p { font-size: 1.1em; opacity: 0.9; }
        
        .calc-type-selector { 
            background: white; 
            border-radius: 15px; 
            padding: 30px; 
            margin-bottom: 30px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .calc-types {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .calc-types { grid-template-columns: 1fr; }
        }
        
        .calc-type-btn {
            background: #f8f9fa;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .calc-type-btn:hover {
            border-color: #667eea;
            background: #f0f2ff;
            transform: translateY(-5px);
        }
        
        .calc-type-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .calc-type-btn h3 {
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .calc-type-btn .icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        /* –ë–∞–Ω–Ω–µ—Ä —Ä–µ–∫–ª–∞–º—ã */
        .ad-banner {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
            color: #333;
            border: 3px dashed #ff6b6b;
        }
        
        .ad-banner h3 {
            color: #d63031;
            margin-bottom: 10px;
        }
        
        .telegram-promo {
            background: linear-gradient(135deg, #0088cc 0%, #005580 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }
        
        .telegram-promo h3 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .telegram-link {
            display: inline-block;
            background: white;
            color: #0088cc;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        .telegram-link:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã */
        .calculator { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); margin-bottom: 30px; display: none; }
        .form-section { margin-bottom: 25px; }
        h2 { color: #333; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #667eea; }
        .input-group { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; }
        .input-field { flex: 1; min-width: 200px; }
        label { display: block; margin-bottom: 8px; color: #555; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 5px; font-size: 16px; }
        input:focus, select:focus, textarea:focus { border-color: #667eea; outline: none; }
        .paint-section { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .paint-card { background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef; }
        button { padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; margin: 10px; }
        .calculate-btn { background: #667eea; color: white; }
        .calculate-btn:hover { background: #5a67d8; }
        .reset-btn { background: #6c757d; color: white; }
        .reset-btn:hover { background: #5a6268; }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
        .results { display: none; background: white; border-radius: 15px; padding: 30px; margin-top: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .comparison-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .result-card { background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef; }
        .result-value { font-size: 24px; font-weight: bold; color: #667eea; margin: 10px 0; }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading { text-align: center; padding: 20px; display: none; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞ */
        .offer-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto; }
        .offer-content { background: white; border-radius: 15px; padding: 30px; width: 90%; max-width: 500px; margin: 50px auto; }
        .surface-types { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
        .surface-btn { padding: 12px; border: 2px solid #ddd; border-radius: 5px; text-align: center; cursor: pointer; }
        .surface-btn.selected { border-color: #667eea; background: #667eea; color: white; }
        .close-btn { float: right; background: none; border: none; font-size: 24px; cursor: pointer; color: #666; }
        .success-message { background: #d4edda; color: #155724; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; }
        
        /* –ü–æ–¥—Å–∫–∞–∑–∫–∏ */
        .form-note {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
            display: block;
        }
        
        .required-field label:after {
            content: " *";
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1>üé® –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ—Ä–æ—à–∫–æ–≤—ã—Ö –∫—Ä–∞—Å–æ–∫</h1>
            <p>–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫—Ä–∞—Å–∫–∏, —Å—á–∏—Ç–∞–µ–º —ç–∫–æ–Ω–æ–º–∏—é, –Ω–∞—Ö–æ–¥–∏–º –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç</p>
        </div>
        
        <!-- –ë–∞–Ω–Ω–µ—Ä —Ä–µ–∫–ª–∞–º—ã -->
        <div class="ad-banner">
            <h3>üöÄ –¢—É—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞—à–∞ —Ä–µ–∫–ª–∞–º–∞!</h3>
            <p>–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å —Å–≤–æ–∏ –∫—Ä–∞—Å–∫–∏ –∏–ª–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ?</p>
            <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏: <strong>sales@example.com</strong></p>
        </div>
        
        <!-- –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Ä–∞—Å—á–µ—Ç–∞ -->
        <div class="calc-type-selector" id="typeSelector">
            <h2>üìä –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ä–∞—Å—á–µ—Ç–∞</h2>
            <div class="calc-types">
                <div class="calc-type-btn active" onclick="selectCalcType('theoretical')">
                    <div class="icon">üéì</div>
                    <h3>–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç</h3>
                    <p>–ó–Ω–∞–µ—Ç–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –∏ —Ç–æ–ª—â–∏–Ω—É –ø–æ–∫—Ä—ã—Ç–∏—è</p>
                    <p><small>–§–æ—Ä–º–∞—Ç: –ù–∞–∑–≤–∞–Ω–∏–µ; –ü–ª–æ—Ç–Ω–æ—Å—Ç—å; –¢–æ–ª—â–∏–Ω–∞; –¶–µ–Ω–∞</small></p>
                </div>
                <div class="calc-type-btn" onclick="selectCalcType('practical')">
                    <div class="icon">üîß</div>
                    <h3>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç</h3>
                    <p>–ó–Ω–∞–µ—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—Ö–æ–¥ –Ω–∞ –∏–∑–¥–µ–ª–∏–µ</p>
                    <p><small>–§–æ—Ä–º–∞—Ç: –ù–∞–∑–≤–∞–Ω–∏–µ; –†–∞—Å—Ö–æ–¥; –¶–µ–Ω–∞</small></p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="showCalculator()">‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ä–∞—Å—á–µ—Ç</button>
            </div>
        </div>
        
        <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
        <div class="calculator" id="theoreticalCalc">
            <div class="form-section">
                <h2>üéì –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç</h2>
                <p>–ó–Ω–∞–µ–º –ø–ª–æ—Ç–Ω–æ—Å—Ç—å, —Ç–æ–ª—â–∏–Ω—É –∏ —Ü–µ–Ω—É</p>
            </div>
            
            <div class="form-section">
                <h2>üìê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–¥–µ–ª–∏—è</h2>
                <div class="input-group">
                    <div class="input-field">
                        <label for="productArea">–ü–ª–æ—â–∞–¥—å –∏–∑–¥–µ–ª–∏—è (–º¬≤)</label>
                        <input type="number" id="productArea" value="1.0" step="0.01" min="0.01">
                        <span class="form-note">–£–∫–∞–∂–∏—Ç–µ –ø–ª–æ—â–∞–¥—å –ø–æ–∫—Ä—ã—Ç–∏—è –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∞—Ö</span>
                    </div>
                    <div class="input-field">
                        <label for="lossFactor">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ—Ç–µ—Ä—å (%)</label>
                        <input type="number" id="lossFactor" value="15" step="0.1" min="0" max="50">
                        <span class="form-note">–û–±—ã—á–Ω–æ 10-20% —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ç–µ—Ä—å</span>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h2>üé® –ö—Ä–∞—Å–∫–∞ 1</h2>
                <div class="paint-card">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="paint1Name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="paint1Name" value="–ü–æ–ª–∏—ç—Å—Ç–µ—Ä">
                        </div>
                        <div class="input-field">
                            <label for="paint1Density">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (–≥/—Å–º¬≥)</label>
                            <input type="number" id="paint1Density" value="1.5" step="0.01">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-field">
                            <label for="paint1Thickness">–¢–æ–ª—â–∏–Ω–∞ (–º–∫–º)</label>
                            <input type="number" id="paint1Thickness" value="60">
                        </div>
                        <div class="input-field">
                            <label for="paint1Price">–¶–µ–Ω–∞ (—Ä—É–±/–∫–≥)</label>
                            <input type="number" id="paint1Price" value="450">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h2>üé® –ö—Ä–∞—Å–∫–∞ 2</h2>
                <div class="paint-card">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="paint2Name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="paint2Name" value="–≠–ø–æ–∫—Å–∏–¥–Ω–∞—è">
                        </div>
                        <div class="input-field">
                            <label for="paint2Density">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (–≥/—Å–º¬≥)</label>
                            <input type="number" id="paint2Density" value="1.8" step="0.01">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-field">
                            <label for="paint2Thickness">–¢–æ–ª—â–∏–Ω–∞ (–º–∫–º)</label>
                            <input type="number" id="paint2Thickness" value="80">
                        </div>
                        <div class="input-field">
                            <label for="paint2Price">–¶–µ–Ω–∞ (—Ä—É–±/–∫–≥)</label>
                            <input type="number" id="paint2Price" value="520">
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="calculate-btn" onclick="calculate('theoretical')">üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <button class="reset-btn" onclick="resetForm()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="reset-btn" onclick="showTypeSelector()">‚óÄÔ∏è –ù–∞–∑–∞–¥</button>
            </div>
        </div>
        
        <!-- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
        <div class="calculator" id="practicalCalc">
            <div class="form-section">
                <h2>üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç</h2>
                <p>–ó–Ω–∞–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—Ö–æ–¥ –∏ —Ü–µ–Ω—É</p>
            </div>
            
            <div class="form-section">
                <h2>üìê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–¥–µ–ª–∏—è</h2>
                <div class="input-group">
                    <div class="input-field">
                        <label for="productArea2">–ü–ª–æ—â–∞–¥—å –∏–∑–¥–µ–ª–∏—è (–º¬≤)</label>
                        <input type="number" id="productArea2" value="1.0" step="0.01" min="0.01">
                        <span class="form-note">–£–∫–∞–∂–∏—Ç–µ –ø–ª–æ—â–∞–¥—å –ø–æ–∫—Ä—ã—Ç–∏—è –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∞—Ö</span>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h2>üé® –ö—Ä–∞—Å–∫–∞ 1</h2>
                <div class="paint-card">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="paint1Name2">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="paint1Name2" value="–ü–æ–ª–∏—ç—Å—Ç–µ—Ä">
                        </div>
                        <div class="input-field">
                            <label for="paint1Consumption">–†–∞—Å—Ö–æ–¥ –Ω–∞ –∏–∑–¥–µ–ª–∏–µ (–∫–≥)</label>
                            <input type="number" id="paint1Consumption" value="0.85" step="0.01">
                        </div>
                    </div>
                    <div class="input-field">
                        <label for="paint1Price2">–¶–µ–Ω–∞ (—Ä—É–±/–∫–≥)</label>
                        <input type="number" id="paint1Price2" value="450">
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h2>üé® –ö—Ä–∞—Å–∫–∞ 2</h2>
                <div class="paint-card">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="paint2Name2">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="paint2Name2" value="–≠–ø–æ–∫—Å–∏–¥–Ω–∞—è">
                        </div>
                        <div class="input-field">
                            <label for="paint2Consumption">–†–∞—Å—Ö–æ–¥ –Ω–∞ –∏–∑–¥–µ–ª–∏–µ (–∫–≥)</label>
                            <input type="number" id="paint2Consumption" value="1.2" step="0.01">
                        </div>
                    </div>
                    <div class="input-field">
                        <label for="paint2Price2">–¶–µ–Ω–∞ (—Ä—É–±/–∫–≥)</label>
                        <input type="number" id="paint2Price2" value="520">
                    </div>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="calculate-btn" onclick="calculate('practical')">üìä –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <button class="reset-btn" onclick="resetForm()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="reset-btn" onclick="showTypeSelector()">‚óÄÔ∏è –ù–∞–∑–∞–¥</button>
            </div>
        </div>
        
        <!-- –ü—Ä–æ–º–æ Telegram -->
        <div class="telegram-promo">
            <h3>üí¨ –ï—Å—Ç—å Telegram? –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤!</h3>
            <p>–†–∞—Å—á–µ—Ç—ã –ø—Ä—è–º–æ –≤ —á–∞—Ç–µ, –∏—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
            <a href="https://t.me/@powdercalcbot" class="telegram-link" id="telegramLink" target="_blank">ü§ñ –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram</a>
        </div>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>–í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞—Å—á–µ—Ç—ã...</p>
        </div>
        
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="results" id="results">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h2>
            <div class="comparison-grid" id="resultsGrid"></div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="calculate-btn" onclick="openOfferModal()">üíº –ó–∞–∫–∞–∑–∞—Ç—å –∫—Ä–∞—Å–∫—É</button>
                <button class="reset-btn" onclick="showTypeSelector()">üîÑ –ù–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç</button>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞ -->
        <div class="offer-modal" id="offerModal">
            <div class="offer-content">
                <button class="close-btn" onclick="closeOfferModal()">√ó</button>
                <h2>üíº –ó–∞–∫–∞–∑ –∫—Ä–∞—Å–∫–∏</h2>
                <p style="color: #666; margin-bottom: 20px;">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</p>
                
                <form id="offerForm">
                    <!-- –¢–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ -->
                    <div class="input-field required-field">
                        <label>–¢–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏</label>
                        <div class="surface-types" id="surfaceTypes">
                            <div class="surface-btn" onclick="selectSurface(this,'gloss')">–ì–ª—è–Ω—Ü–µ–≤–∞—è</div>
                            <div class="surface-btn" onclick="selectSurface(this,'matte')">–ú–∞—Ç–æ–≤–∞—è</div>
                            <div class="surface-btn" onclick="selectSurface(this,'shagreen')">–®–∞–≥—Ä–µ–Ω—å</div>
                            <div class="surface-btn" onclick="selectSurface(this,'moire')">–ú—É–∞—Ä</div>
                            <div class="surface-btn" onclick="selectSurface(this,'antique')">–ê–Ω—Ç–∏–∫</div>
                        </div>
                        <span class="form-note">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–æ–∫—Ä—ã—Ç–∏—è</span>
                    </div>
                    
                    <!-- –¶–≤–µ—Ç -->
                    <div class="input-field required-field">
                        <label for="offerColor">–¶–≤–µ—Ç –∫—Ä–∞—Å–∫–∏</label>
                        <input type="text" id="offerColor" placeholder="RAL 9010 –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞" required>
                        <span class="form-note">–£–∫–∞–∂–∏—Ç–µ —Ü–≤–µ—Ç –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É RAL –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
                    </div>
                    
                    <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–∫–∏ –≤ –∫–≥ -->
                    <div class="input-field required-field">
                        <label for="offerQuantityKg">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–∫–∏</label>
                        <input type="number" id="offerQuantityKg" value="10" step="0.1" min="0.1" required>
                        <span class="form-note">–£–∫–∞–∂–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–∫–∏ –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö</span>
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <h3 style="margin-top: 30px; border-bottom: 2px solid #667eea; padding-bottom: 10px;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    
                    <div class="input-group">
                        <div class="input-field required-field">
                            <label for="offerName">–í–∞—à–µ –∏–º—è</label>
                            <input type="text" id="offerName" required>
                        </div>
                        <div class="input-field required-field">
                            <label for="offerPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="offerPhone" placeholder="+7 (999) 999-99-99" required>
                        </div>
                    </div>
                    
                    <div class="input-field required-field">
                        <label for="offerEmail">Email</label>
                        <input type="email" id="offerEmail" required>
                    </div>
                    
                    <div class="input-field">
                        <label for="offerComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                        <textarea id="offerComment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏, —Å—Ä–æ—á–Ω–æ—Å—Ç—å –∏ —Ç.–¥."></textarea>
                        <span class="form-note">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</span>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                    <button type="submit" class="calculate-btn" style="width: 100%; margin: 20px 0; padding: 17px; font-size: 1.1em;">
                        üöÄ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∫—Ä–∞—Å–∫–∏
                    </button>
                    
                    <p style="text-align: center; color: #666; font-size: 0.9em;">
                        * - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª—è
                    </p>
                </form>
                
                <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ -->
                <div class="success-message" id="successMessage">
                    <h3>‚úÖ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</h3>
                    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p style="margin: 0 0 10px 0; font-weight: bold;">üìã –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:</p>
                        <p id="orderDetails" style="margin: 0;"></p>
                    </div>
                    
                    <p style="margin: 15px 0;">
                        <strong>üìû –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞</strong><br>
                        –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏.
                    </p>
                    
                    <div class="telegram-promo" style="margin: 20px 0; padding: 15px; background: #f0f7ff; border-radius: 10px;">
                        <p style="margin: 0 0 10px 0; color: #333;">
                            <strong>üí¨ –ï—Å—Ç—å Telegram?</strong><br>
                            –î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤ –Ω—É–∂–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫—Ä–∞—Å–∫–∏!
                        </p>
                        <a href="https://t.me/–≤–∞—à_–±–æ—Ç_username" class="telegram-link" id="telegramLinkSuccess" target="_blank" 
                           style="display: inline-block; padding: 10px 20px; font-size: 0.9em; margin-top: 5px;">
                            ü§ñ –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
                        </a>
                    </div>
                    
                    <button class="calculate-btn" onclick="closeOfferModal()" 
                            style="margin-top: 20px; width: 100%; padding: 12px;">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentCalcType = 'theoretical';
        let selectedSurface = '';
        let currentResult = null;
        
        function selectCalcType(type) {
            currentCalcType = type;
            document.querySelectorAll('.calc-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.calc-type-btn').classList.add('active');
        }
        
        function showTypeSelector() {
            document.getElementById('typeSelector').style.display = 'block';
            document.getElementById('theoreticalCalc').style.display = 'none';
            document.getElementById('practicalCalc').style.display = 'none';
            document.getElementById('results').style.display = 'none';
        }
        
        function showCalculator() {
            document.getElementById('typeSelector').style.display = 'none';
            if (currentCalcType === 'theoretical') {
                document.getElementById('theoreticalCalc').style.display = 'block';
            } else {
                document.getElementById('practicalCalc').style.display = 'block';
            }
        }
        
        function calculate(type) {
            document.getElementById('loading').style.display = 'block';
            
            let data = {};
            
            if (type === 'theoretical') {
                data = {
                    calc_type: 'theoretical',
                    product_area: parseFloat(document.getElementById('productArea').value),
                    paint1: {
                        name: document.getElementById('paint1Name').value,
                        density: parseFloat(document.getElementById('paint1Density').value),
                        thickness: parseFloat(document.getElementById('paint1Thickness').value),
                        price: parseFloat(document.getElementById('paint1Price').value)
                    },
                    paint2: {
                        name: document.getElementById('paint2Name').value,
                        density: parseFloat(document.getElementById('paint2Density').value),
                        thickness: parseFloat(document.getElementById('paint2Thickness').value),
                        price: parseFloat(document.getElementById('paint2Price').value)
                    }
                };
            } else {
                data = {
                    calc_type: 'practical',
                    product_area: parseFloat(document.getElementById('productArea2').value),
                    paint1: {
                        name: document.getElementById('paint1Name2').value,
                        real_consumption: parseFloat(document.getElementById('paint1Consumption').value),
                        price: parseFloat(document.getElementById('paint1Price2').value)
                    },
                    paint2: {
                        name: document.getElementById('paint2Name2').value,
                        real_consumption: parseFloat(document.getElementById('paint2Consumption').value),
                        price: parseFloat(document.getElementById('paint2Price2').value)
                    }
                };
            }
            
            fetch('/api/calculate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            })
            .then(r => r.json())
            .then(result => {
                document.getElementById('loading').style.display = 'none';
                if (result.success) {
                    currentResult = result.result;
                    displayResults(result.result);
                    document.getElementById('typeSelector').style.display = 'none';
                    document.getElementById('theoreticalCalc').style.display = 'none';
                    document.getElementById('practicalCalc').style.display = 'none';
                    document.getElementById('results').style.display = 'block';
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + result.error);
                }
            })
            .catch(() => {
                document.getElementById('loading').style.display = 'none';
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
            });
        }
        
        function displayResults(result) {
            const grid = document.getElementById('resultsGrid');
            const isTheoretical = result.comparison.calculation_type === 'theoretical';
            
            let paint1Details = '';
            let paint2Details = '';
            
            if (isTheoretical) {
                paint1Details = `
                    <p><strong>–ü–ª–æ—Ç–Ω–æ—Å—Ç—å:</strong> ${result.paint1.density} –≥/—Å–º¬≥</p>
                    <p><strong>–¢–æ–ª—â–∏–Ω–∞:</strong> ${result.paint1.thickness} –º–∫–º</p>
                    <p><strong>–ü–æ–∫—Ä—ã—Ç–∏–µ:</strong> ${result.paint1.coverage_area} –º¬≤/–∫–≥</p>
                    <p><strong>–†–∞—Å—Ö–æ–¥:</strong> ${result.paint1.practical_consumption} –∫–≥</p>
                    <p><strong>–¶–µ–Ω–∞ –º¬≤:</strong> ${result.paint1.cost_per_sqm} —Ä—É–±</p>
                `;
                paint2Details = `
                    <p><strong>–ü–ª–æ—Ç–Ω–æ—Å—Ç—å:</strong> ${result.paint2.density} –≥/—Å–º¬≥</p>
                    <p><strong>–¢–æ–ª—â–∏–Ω–∞:</strong> ${result.paint2.thickness} –º–∫–º</p>
                    <p><strong>–ü–æ–∫—Ä—ã—Ç–∏–µ:</strong> ${result.paint2.coverage_area} –º¬≤/–∫–≥</p>
                    <p><strong>–†–∞—Å—Ö–æ–¥:</strong> ${result.paint2.practical_consumption} –∫–≥</p>
                    <p><strong>–¶–µ–Ω–∞ –º¬≤:</strong> ${result.paint2.cost_per_sqm} —Ä—É–±</p>
                `;
            } else {
                paint1Details = `
                    <p><strong>–§–∞–∫—Ç. —Ä–∞—Å—Ö–æ–¥:</strong> ${result.paint1.real_consumption} –∫–≥</p>
                    <p><strong>–ü–æ–∫—Ä—ã—Ç–∏–µ:</strong> ${result.paint1.coverage_area} –º¬≤/–∫–≥</p>
                    <p><strong>–¶–µ–Ω–∞ –º¬≤:</strong> ${result.paint1.cost_per_sqm} —Ä—É–±</p>
                `;
                paint2Details = `
                    <p><strong>–§–∞–∫—Ç. —Ä–∞—Å—Ö–æ–¥:</strong> ${result.paint2.real_consumption} –∫–≥</p>
                    <p><strong>–ü–æ–∫—Ä—ã—Ç–∏–µ:</strong> ${result.paint2.coverage_area} –º¬≤/–∫–≥</p>
                    <p><strong>–¶–µ–Ω–∞ –º¬≤:</strong> ${result.paint2.cost_per_sqm} —Ä—É–±</p>
                `;
            }
            
            grid.innerHTML = `
                <div class="result-card">
                    <h3>${result.paint1.name}</h3>
                    <p><strong>–¶–µ–Ω–∞:</strong> ${result.paint1.price_per_kg} —Ä—É–±/–∫–≥</p>
                    ${paint1Details}
                    <div class="result-value">üí∞ ${result.paint1.product_cost} —Ä—É–±</div>
                </div>
                
                <div class="result-card">
                    <h3>${result.paint2.name}</h3>
                    <p><strong>–¶–µ–Ω–∞:</strong> ${result.paint2.price_per_kg} —Ä—É–±/–∫–≥</p>
                    ${paint2Details}
                    <div class="result-value">üí∞ ${result.paint2.product_cost} —Ä—É–±</div>
                </div>
                
                <div class="result-card">
                    <h3>üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ</h3>
                    <p><strong>–†–∞–∑–Ω–∏—Ü–∞ –≤ —Å—Ç–æ–∏–º–æ—Å—Ç–∏:</strong></p>
                    <div class="result-value" style="color: ${result.comparison.cost_difference > 0 ? '#4CAF50' : '#f44336'}">
                        ${Math.abs(result.comparison.cost_difference)} —Ä—É–±
                    </div>
                    <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞:</strong></p>
                    <div class="result-value" style="color: ${result.comparison.cost_difference_percent > 0 ? '#4CAF50' : '#f44336'}">
                        ${Math.abs(result.comparison.cost_difference_percent)}%
                    </div>
                    <p><strong>–í—ã–≥–æ–¥–Ω–µ–µ:</strong></p>
                    <div class="result-value" style="color: #4CAF50">
                        ${result.comparison.cheaper_paint_name}
                    </div>
                    <p><strong>–¢–∏–ø —Ä–∞—Å—á–µ—Ç–∞:</strong> ${isTheoretical ? '–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π üéì' : '–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π üîß'}</p>
                </div>
            `;
        }
        
        function selectSurface(element, type) {
            selectedSurface = type;
            document.querySelectorAll('.surface-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            element.classList.add('selected');
        }
        
        function openOfferModal() {
            document.getElementById('offerModal').style.display = 'block';
            if (currentResult) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–∫–∏
                let suggestedQuantity = 10; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                
                if (currentResult.comparison.calculation_type === 'practical') {
                    suggestedQuantity = (currentResult.paint1.real_consumption + currentResult.paint2.real_consumption) / 2;
                } else if (currentResult.comparison.calculation_type === 'theoretical') {
                    suggestedQuantity = (currentResult.paint1.practical_consumption + currentResult.paint2.practical_consumption) / 2;
                }
                
                document.getElementById('offerQuantityKg').value = Math.max(0.1, Math.round(suggestedQuantity * 10) / 10);
            }
        }
        
        function closeOfferModal() {
            document.getElementById('offerModal').style.display = 'none';
            document.getElementById('offerForm').reset();
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('offerForm').style.display = 'block';
            selectedSurface = '';
            document.querySelectorAll('.surface-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
        document.getElementById('offerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedSurface) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏');
                return;
            }
            
            const quantityKg = parseFloat(document.getElementById('offerQuantityKg').value);
            if (!quantityKg || quantityKg <= 0) {
                alert('–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–∫–∏ –≤ –∫–≥ (–±–æ–ª—å—à–µ 0)');
                return;
            }
            
            const data = {
                surface_type: selectedSurface,
                color: document.getElementById('offerColor').value,
                quantity_kg: quantityKg,
                name: document.getElementById('offerName').value,
                phone: document.getElementById('offerPhone').value,
                email: document.getElementById('offerEmail').value,
                comment: document.getElementById('offerComment').value
            };
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
            const surfaceNames = {
                'gloss': '–ì–ª—è–Ω—Ü–µ–≤–∞—è',
                'matte': '–ú–∞—Ç–æ–≤–∞—è',
                'shagreen': '–®–∞–≥—Ä–µ–Ω—å',
                'moire': '–ú—É–∞—Ä',
                'antique': '–ê–Ω—Ç–∏–∫'
            };
            
            const orderDetails = `
                <strong>–¢–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏:</strong> ${surfaceNames[selectedSurface] || selectedSurface}<br>
                <strong>–¶–≤–µ—Ç:</strong> ${data.color}<br>
                <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–∫–∏:</strong> ${data.quantity_kg} –∫–≥
            `;
            
            document.getElementById('orderDetails').innerHTML = orderDetails;
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            fetch('/api/offer', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            })
            .then(r => r.json())
            .then(result => {
                if (result.success) {
                    document.getElementById('offerForm').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + result.error);
                }
            })
            .catch(error => {
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error);
            });
        });
        
        function resetForm() {
            if (currentCalcType === 'theoretical') {
                document.getElementById('productArea').value = '1.0';
                document.getElementById('lossFactor').value = '15';
                document.getElementById('paint1Name').value = '–ü–æ–ª–∏—ç—Å—Ç–µ—Ä';
                document.getElementById('paint1Density').value = '1.5';
                document.getElementById('paint1Thickness').value = '60';
                document.getElementById('paint1Price').value = '450';
                document.getElementById('paint2Name').value = '–≠–ø–æ–∫—Å–∏–¥–Ω–∞—è';
                document.getElementById('paint2Density').value = '1.8';
                document.getElementById('paint2Thickness').value = '80';
                document.getElementById('paint2Price').value = '520';
            } else {
                document.getElementById('productArea2').value = '1.0';
                document.getElementById('paint1Name2').value = '–ü–æ–ª–∏—ç—Å—Ç–µ—Ä';
                document.getElementById('paint1Consumption').value = '0.85';
                document.getElementById('paint1Price2').value = '450';
                document.getElementById('paint2Name2').value = '–≠–ø–æ–∫—Å–∏–¥–Ω–∞—è';
                document.getElementById('paint2Consumption').value = '1.2';
                document.getElementById('paint2Price2').value = '520';
            }
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ç–∏–ø–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        showTypeSelector();
    </script>
</body>
</html>
